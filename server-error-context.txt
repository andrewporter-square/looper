
[1] WARNING:
[1] [Core - Button] Component is used without any label. Please include "aria-label"/"aria-labelledby" prop or a children to meet AA compliance.
[1]
[1]
[0]  FAIL  apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx (23.518 s)
[0]   ● ConsumerLendingSummary › Error handling › should show error if credit card with error is passed in
[0]
[0]     expect(received).toBeInTheDocument()
[0]
[0]     received value must be an HTMLElement or an SVGElement.
[0]     Received has value: null
[0]
[0]       447 |
[0]       448 |       const { queryByText } = render(<ConsumerLendingSummary />)
[0]     > 449 |       expect(queryByText('summary:error.notAllowed.heading_cannotSwitch')).toBeInTheDocument()
[0]           |                                                                            ^
[0]       450 |       expect(queryByText('summary:error.notAllowed.message_cannotSwitch')).toBeInTheDocument()
[0]       451 |     })
[0]       452 |
[0]
[0]       at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
[0]       at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:449:76)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should show error if debit card will expire in two months, as well as fire an analytics event, if no checkout error
[0]
[0]     expect(received).toBeInTheDocument()
[0]
[0]     received value must be an HTMLElement or an SVGElement.
[0]     Received has value: null
[0]
[0]       463 |
[0]       464 |       const { queryByText } = render(<ConsumerLendingSummary />)
[0]     > 465 |       expect(queryByText('summary:error.cardExpiryLimitInMonths.message_cannotSwitch')).toBeInTheDocument()
[0]           |                                                                                         ^
[0]       466 |       expect(mocks.monitoring.logEvent).toHaveBeenCalledWith(TrackingEvent.VIEWED_NON_TERMINAL_ERROR, { errorCode: NonTerminalErrors.ClCardExpiryError })
[0]       467 |     })
[0]       468 |
[0]
[0]       at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
[0]       at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:465:89)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should not show applePayNotAllowed error when apple pay is enabled
[0]
[0]     expect(element).not.toBeInTheDocument()
[0]
[0]     expected document not to contain element, found <p class="text semanticColorError">consumerLending:applePayNotAllowed.message_cannotSwitch</p> instead
[0]
[0]       540 |       }))
[0]       541 |       const { queryByText, queryByTestId } = render(<ConsumerLendingSummary />)
[0]     > 542 |       expect(queryByText('consumerLending:applePayNotAllowed.message_cannotSwitch')).not.toBeInTheDocument()
[0]           |                                                                                          ^
[0]       543 |
[0]       544 |       const continueButton = queryByTestId(CONTINUE_BUTTON_TEST_ID)
[0]       545 |       expect(continueButton).toBeEnabled()
[0]
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:542:90)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should not show auto switched to card message if preferred payment method is applePay and a valid card exists when apple pay is enabled
[0]
[0]     expect(element).not.toBeInTheDocument()
[0]
[0]     expected document not to contain element, found <h2 class="text heading sizeS bold">consumerLending:applePayNotAllowed.heading_switched</h2> instead
[0]
[0]       567 |       }))
[0]       568 |       const { queryByText } = render(<ConsumerLendingSummary />)
[0]     > 569 |       expect(queryByText('consumerLending:applePayNotAllowed.heading_switched')).not.toBeInTheDocument()
[0]           |                                                                                      ^
[0]       570 |       expect(queryByText('consumerLending:applePayNotAllowed.message_switched')).not.toBeInTheDocument()
[0]       571 |     })
[0]       572 |
[0]
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:569:86)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should show card error if preferred payment method is applePay and only one invalid card on file
[0]
[0]     expect(received).toBeInTheDocument()
[0]
[0]     received value must be an HTMLElement or an SVGElement.
[0]     Received has value: null
[0]
[0]       596 |       expect(queryByText('consumerLending:applePayNotAllowed.heading_switched')).not.toBeInTheDocument()
[0]       597 |       expect(queryByText('consumerLending:applePayNotAllowed.message_switched')).not.toBeInTheDocument()
[0]     > 598 |       expect(queryByText('summary:error.cardExpiryLimitInMonths.message_cannotSwitch')).toBeInTheDocument()
[0]           |                                                                                         ^
[0]       599 |     })
[0]       600 |
[0]       601 |     test('should show card error if preferred payment method is invalid bank account and only one invalid card on file', () => {
[0]
[0]       at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
[0]       at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:598:89)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should show card error if preferred payment method is invalid bank account and only one invalid card on file
[0]
[0]     expect(received).toBeInTheDocument()
[0]
[0]     received value must be an HTMLElement or an SVGElement.
[0]     Received has value: null
[0]
[0]       624 |       expect(queryByText('consumerLending:bankAccountErrors.switchedToCard.heading')).not.toBeInTheDocument()
[0]       625 |       expect(queryByText('consumerLending:bankAccountErrors.switchedToCard.message')).not.toBeInTheDocument()
[0]     > 626 |       expect(queryByText('summary:error.cardExpiryLimitInMonths.message_cannotSwitch')).toBeInTheDocument()
[0]           |                                                                                         ^
[0]       627 |     })
[0]       628 |
[0]       629 |     test('should show switched to card error if preferred payment method is bank account and a valid card exists', () => {
[0]
[0]       at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
[0]       at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:626:89)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should show switched to card error if preferred payment method is debit card that will expire in two months and a valid card exists
[0]
[0]     expect(received).toBeInTheDocument()
[0]
[0]     received value must be an HTMLElement or an SVGElement.
[0]     Received has value: null
[0]
[0]       688 |
[0]       689 |       const { queryByText } = render(<ConsumerLendingSummary />)
[0]     > 690 |       expect(queryByText('summary:error.cardExpiryLimitInMonths.heading_switched')).toBeInTheDocument()
[0]           |                                                                                     ^
[0]       691 |       expect(queryByText('summary:error.cardExpiryLimitInMonths.message_switched')).toBeInTheDocument()
[0]       692 |     })
[0]       693 |
[0]
[0]       at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
[0]       at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:690:85)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should not switch to card if preferred payment method is invalid debit card and no valid card exists
[0]
[0]     expect(received).toBeInTheDocument()
[0]
[0]     received value must be an HTMLElement or an SVGElement.
[0]     Received has value: null
[0]
[0]       703 |
[0]       704 |       const { queryByText } = render(<ConsumerLendingSummary />)
[0]     > 705 |       expect(queryByText('summary:error.creditCardNotAllowed.message_cannotSwitch')).toBeInTheDocument()
[0]           |                                                                                      ^
[0]       706 |     })
[0]       707 |
[0]       708 |     test('should show creditCardNotAllowed error, as well as fire analytics', () => {
[0]
[0]       at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
[0]       at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:705:86)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should show creditCardNotAllowed error, as well as fire analytics
[0]
[0]     expect(received).toBeInTheDocument()
[0]
[0]     received value must be an HTMLElement or an SVGElement.
[0]     Received has value: null
[0]
[0]       715 |
[0]       716 |       const { queryByText } = render(<ConsumerLendingSummary />)
[0]     > 717 |       expect(queryByText('summary:error.creditCardNotAllowed.heading_switched')).toBeInTheDocument()
[0]           |                                                                                  ^
[0]       718 |       expect(queryByText('summary:error.creditCardNotAllowed.message_switched')).toBeInTheDocument()
[0]       719 |       expect(mocks.monitoring.logEvent).toHaveBeenCalledWith('Viewed Non-terminal error', { errorCode: 'creditCardNotAllowed' })
[0]       720 |     })
[0]
[0]       at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
[0]       at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:717:82)
[0]
[0]   ● ConsumerLendingSummary › Error handling › should show card error if preferred payment method is cashAppPay and only one invalid card on file
[0]
[0]     expect(received).toBeInTheDocument()
[0]
[0]     received value must be an HTMLElement or an SVGElement.
[0]     Received has value: null
[0]
[0]       787 |       expect(queryByText('consumerLending:cashAppPayNotAllowed.heading_switched')).not.toBeInTheDocument()
[0]       788 |       expect(queryByText('consumerLending:cashAppPayNotAllowed.message_switched')).not.toBeInTheDocument()
[0]     > 789 |       expect(queryByText('summary:error.cardExpiryLimitInMonths.message_cannotSwitch')).toBeInTheDocument()
[0]           |                                                                                         ^
[0]       790 |     })
[0]       791 |   })
[0]       792 |
[0]
[0]       at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
[0]       at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
[0]       at Object.toBeInTheDocument (apps/checkout/src/page/summary-pay-monthly/PayMonthlySummary.test.tsx:789:89)
[0]
[1]  ✓ apps/checkout/src/component/ProcessOrder/ProcessOrder.test.tsx (30 tests) 264ms
[1] stderr | apps/portal/src/component/PayNowModal/Payment/Payment.vitest.tsx > Payment Component > should toggle tab onClick
[1]  
